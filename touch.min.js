//     Touch.js for Zepto.js
//     (c) 2010-2013 Thomas Fuchs
//     Zepto.js may be freely distributed under the MIT license.

(function(f){function r(){c=null;a.last&&(a.el.trigger("longTap"),a={})}function p(){e&&clearTimeout(e);g&&clearTimeout(g);h&&clearTimeout(h);c&&clearTimeout(c);e=g=h=c=null;a={}}var a={},e,g,h,c,k;f(document).ready(function(){var l,q,m=0,n=0,d;"MSGesture"in window&&(k=new MSGesture,k.target=document.body);f(document).bind("MSGestureEnd",function(b){if(b=1<b.velocityX?"Right":-1>b.velocityX?"Left":1<b.velocityY?"Down":-1>b.velocityY?"Up":null)a.el.trigger("swipe"),a.el.trigger("swipe"+b)}).on("touchstart MSPointerDown",
function(b){if("MSPointerDown"!=b.type||b.pointerType==b.MSPOINTER_TYPE_TOUCH&&b.isPrimary)d="MSPointerDown"==b.type?b:b.touches[0],l=Date.now(),q=l-(a.last||l),a.el=f("tagName"in d.target?d.target:d.target.parentNode),e&&clearTimeout(e),a.x1=d.pageX,a.y1=d.pageY,0<q&&250>=q&&(a.isDoubleTap=!0),a.last=l,c=setTimeout(r,750),k&&"MSPointerDown"==b.type&&k.addPointer(b.pointerId)}).on("touchmove MSPointerMove",function(b){if("MSPointerMove"!=b.type||b.pointerType==b.MSPOINTER_TYPE_TOUCH&&b.isPrimary)d=
"MSPointerMove"==b.type?b:b.touches[0],c&&clearTimeout(c),c=null,a.x2=d.pageX,a.y2=d.pageY,m+=Math.abs(a.x1-a.x2),n+=Math.abs(a.y1-a.y2)}).on("touchend MSPointerUp",function(b){if("MSPointerUp"!=b.type||b.pointerType==b.MSPOINTER_TYPE_TOUCH&&b.isPrimary)c&&clearTimeout(c),c=null,a.x2&&30<Math.abs(a.x1-a.x2)||a.y2&&30<Math.abs(a.y1-a.y2)?h=setTimeout(function(){a.el.trigger("swipe");a.el.trigger("swipe"+(Math.abs(a.x1-a.x2)>=Math.abs(a.y1-a.y2)?0<a.x1-a.x2?"Left":"Right":0<a.y1-a.y2?"Up":"Down"));
a={}},0):"last"in a&&(30>m&&30>n?g=setTimeout(function(){var b=f.Event("tap");b.cancelTouch=p;a.el.trigger(b);a.isDoubleTap?(a.el.trigger("doubleTap"),a={}):e=setTimeout(function(){e=null;a.el.trigger("singleTap");a={}},250)},0):a={}),m=n=0}).on("touchcancel MSPointerCancel",p);f(window).on("scroll",p)});"swipe swipeLeft swipeRight swipeUp swipeDown doubleTap tap singleTap longTap".split(" ").forEach(function(a){f.fn[a]=function(c){return this.on(a,c)}})})(Zepto)